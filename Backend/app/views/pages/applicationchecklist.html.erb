<body>
  <header>
    <div class="top-bar">
      <div class="top-bar-left">
        <span>You are in Personal Banking</span>
        <span>ATM & Branch</span>
        <span>Help & Support</span>
      </div>
    </div>
    <div class="main-header">
      <div class="logo">
        <%= image_tag("dbs_logo.svg", alt: "DBS", class: "logo-icon") %>
      </div>
      <nav>
        <ul>
          <li><a href="#">Bank</a></li>
          <li><a href="#">Cards</a></li>
          <li><a href="#">Insure</a></li>
          <li><a href="#">Borrow</a></li>
          <li><a href="#">Invest</a></li>
          <li><a href="#">Learn</a></li>
          <li><a href="#">Marketplace</a></li>
        </ul>
      </nav>
      <div class="search-login">
        <input type="text" placeholder="Search">
        <button class="login">Login</button>
      </div>
    </div>
  </header>
  <div class="title">
    <h1>Application Checklist</h1>
  </div>
  <div class="container">
    <div class="section" id="section1" onclick="showPopup('principal_popup')">
      <h2>Principal Credit Cards</h2>
    </div>
    <div class="section" id="section2" onclick="showPopup('supplementary_popup')">
      <h2>Supplementary Credit Cards</h2>
    </div>
    <div class="section" id="section3" onclick="showPopup('livefresh_popup')">
      <h2>DBS Live Fresh Student Card</h2>
    </div>
  </div>

  <!-- Popups -->
  <div class="popup-overlay" id="principal_popup">
    <div class="popup-content">
      <span class="close" onclick="closePopup('principal_popup')">&times;</span>
      <div class="title-container">
        <h1>Principal Credit Cards</h1>
        <div class="toggle-switch">
          <input type="checkbox" id="toggle" class="toggle-input">
          <label for="toggle" class="toggle-label">
              <span class="toggle-text">
                  <span id="sg-pr">Singaporean/Permanent Resident</span>
                  <span id="foreigner">Foreigners</span>
              </span>
          </label>
        </div>
      </div>
      
      <!-- Principal Cards -->
      <div class="header">
        <div class="tabs">
          <button class="tab active" onclick="openTab(event, 'label1')">Salaried Employee (more than 3 months)</button>
          <button class="tab" onclick="openTab(event, 'label2')">Salaried Employee (less than 3 months)</button>
          <button class="tab" onclick="openTab(event, 'label3')">Variable/Commission-based Employees or Self-Employed</button>
        </div>
      </div>

      <!-- Salaried Employee more than 3 months - Singaporean -->
      <div id="label1" class="tab-content" style="display: block;">
        <div class="content" id="singapore-content">
          <div class="sidebar">
            <div class="accordion">
              <div class="accordion-item">
                <button class="accordion-header" data-image="<%= image_path('Nric.png') %>" onclick="toggleAccordion(event,false)">Identification Document</button>
                <div class="accordion-content">
                  <p>NRIC (front & back) for Singaporean/Permanent Residents</p>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header" data-image='["<%= image_path('income-slip.png') %>","<%= image_path('cpf-contribution-history.jpg') %>","<%= image_path('bank-statement.webp') %>"]' onclick="toggleAccordion(event,true)">Financial Document</button>
                <div class="accordion-content">
                  <p>Submission of either documents are acceptable:
                    <ul>
                      <li>Latest 3 months’ computerised payslip in SGD is preferred; else minimally Latest 1 month’s computerised payslip</li>
                      <li>Latest 12 months’ CPF Contribution History Statement</li>
                      <li>Latest 3 months’ salary crediting bank statements in SGD</li>
                    </ul>
                  </p>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header" data-image="<%= image_path('tax-assesment.png') %>" onclick="toggleAccordion(event,false)">Income Tax Notice of Assessment</button>
                <div class="accordion-content">
                  <p>Latest 2 years of Income Tax Notice of Assessment in SGD is preferred; else minimally latest 1 year of Income Tax Notice of Assessment</p>
                </div>
              </div>
            </div>
          </div>
          <div class="main-content">
            <%= image_tag("visa-card.jpg", alt: "Visa Card", id: "main-image-1s", class: "main-image", style: "width: 80%;") %>
          </div>
        </div>

        <!-- Salaried Employee more than 3 months - Foreigner -->
        <div class="content" id="foreigners-content" style="display: none;">
          <div class="sidebar">
            <div class="accordion">
              <div class="accordion-item">
                <button class="accordion-header" data-image="<%= image_path('passport.jpeg') %>" onclick="toggleAccordion(event,false)">Valid Passport</button>
                <div class="accordion-content">
                  <p>Passport for Foreigner (minimum validity of 6 months at the time of application)</p>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header" data-image='["<%= image_path('employment-pass.jpg') %>","<%= image_path('spass.jpg') %>","<%= image_path('personalised-employment.jpg') %>","<%= image_path('long-term.jpg') %>","<%= image_path('overseas-network.jpg') %>"]' onclick="toggleAccordion(event,true)">Employment Pass</button>
                <div class="accordion-content">
                  <p>Employment Pass must have a minimum validity of 6 months at the time of application. Any of these following pass is acceptable:
                    <ul>
                      <li>Employment Pass</li> 
                      <li>S Pass</li> 
                      <li>Personalised Employment Pass</li>
                      <li>Long-Term Visit Pass with LOC</li>
                      <li>Tech. Pass</li>
                      <li>International Organisation Pass</li>
                      <li>Overseas Networks & Expertise Pass</li>
                    </ul>
                  </p>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header" data-image="<%= image_path('tax-assesment.png') %>" onclick="toggleAccordion(event,false)">Latest Income Tax Notice of Assessment</button>
                <div class="accordion-content">
                  <p>Latest 2 years of Income Tax Notice of Assessment in SGD is preferred; else minimally latest 1 year of Income Tax Notice of Assessment</p>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header" data-image="<%= image_path('income-slip.png') %>" onclick="toggleAccordion(event,false)">Latest Computerised Payslip</button>
                <div class="accordion-content">
                  <p>Document must be dated within 3 months before the date of application; else minimally Latest 1 month’s computerised payslip</p>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header" data-image='["<%= image_path('employment-certificate.jpg') %>","<%= image_path('utility-bill.webp') %>","<%= image_path('account.webp') %>","<%= image_path('ipa.webp') %>","<%= image_path('dom-worker-work-permit.jpg') %>"]' onclick="toggleAccordion(event,true)">Proof of Residential Address</button>
                <div class="accordion-content">
                  <p>Latest copy of your Residential Address proof dated within 3 months before the date of card application (For new DBS/POSB Bank customers only). Submission of either one of the documents is accpetable:
                    <ul>
                      <li>Letter of offer/ employment</li>
                      <li>Local utility/ telecommunication bill</li>
                      <li>Local bank statement/ credit card statement</li>
                      <li>In-Principle Approval (IPA) issued by Ministry of Manpower</li>
                      <li>In-Principle Approval (IPA) issued from ICA</li>
                      <li>Work permit of foreign domestic worker issue by Ministry of Manpower</li>
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="main-content">
            <%= image_tag("visa-card.jpg", alt: "Visa Card", id: "main-image-1f", style: "width: 80%;") %>
          </div>
        </div>
      </div>

      <!-- Salaried Employee less than 3 months - Singaporean -->
      <div id="label2" class="tab-content" style="display: none;">
        <div class="content" id="singapore-content">
          <div class="sidebar">
            <div class="accordion">
              <div class="accordion-item">
                <button class="accordion-header" data-image="<%= image_path('Nric.png') %>" onclick="toggleAccordion(event,false)">Identification Document</button>
                  <div class="accordion-content">
                      <p>NRIC (front & back) for Singaporean/Permanent Residents</p>
                  </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header" data-image="<%= image_path('income-slip.png') %>" onclick="toggleAccordion(event,true)">Financial Document</button>
                  <div class="accordion-content">
                      <p>Submission of either documents are acceptable:
                      <ul>
                          <li>Latest computerised payslip in SGD</li>
                          <li>Full Set of Letter of Appointment (Signed copy by HR and you) + Copy of Staff Pass</li>
                      </ul>
                      </p>
                  </div>
              </div>
            </div>
          </div>
          <div class="main-content">
              <%= image_tag("visa-card.jpg", alt: "Visa Card", id: "main-image-2s", class: "main-image", style: "width: 80%;") %>
          </div>
        </div>

        <!-- Salaried Employee less than 3 months - Singaporean -->
        <div class="content" id="foreigners-content" style="display: none;">
          <div class="sidebar">
            <div class="accordion">
              <div class="accordion-item">
                <button class="accordion-header" data-image="<%= image_path('passport.jpeg') %>" onclick="toggleAccordion(event,false)">Valid Passport</button>
                <div class="accordion-content">
                  <p>Passport for Foreigner (minimum validity of 6 months at the time of application)</p>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header" data-image='["<%= image_path('employment-pass.jpg') %>","<%= image_path('spass.jpg') %>","<%= image_path('personalised-employment.jpg') %>","<%= image_path('long-term.jpg') %>","<%= image_path('overseas-network.jpg') %>"]' onclick="toggleAccordion(event,true)">Employment Pass</button>
                <div class="accordion-content">
                  <p>Employment Pass must have a minimum validity of 6 months at the time of application. Any of these following pass is acceptable:
                    <ul>
                      <li>Employment Pass</li> 
                      <li>S Pass</li> 
                      <li>Personalised Employment Pass</li>
                      <li>Long-Term Visit Pass with LOC</li>
                      <li>Tech. Pass</li>
                      <li>International Organisation Pass</li>
                      <li>Overseas Networks & Expertise Pass</li>
                    </ul>
                  </p>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header" data-image='["<%= image_path('income-slip.png') %>", "<%= image_path('employment-certificate.jpg') %>"]' onclick="toggleAccordion(event,true)">Proof of Employment</button>
                <div class="accordion-content">
                  <p>Any following document is acceptable:
                    <ul>
                      <li>Latest Computerised Payslip</li>
                      <li>Company letter certifying employment and salary </li>
                    <ul>
                  </p>
                </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header" data-image='["<%= image_path('employment-certificate.jpg') %>","<%= image_path('utility-bill.webp') %>","<%= image_path('account.webp') %>","<%= image_path('ipa.webp') %>","<%= image_path('dom-worker-work-permit.jpg') %>"]' onclick="toggleAccordion(event,true)">Proof of Residential Address</button>
                <div class="accordion-content">
                  <p>Latest copy of your Residential Address proof dated within 3 months before the date of card application (For new DBS/POSB Bank customers only). Submission of either one of the documents is accpetable:
                    <ul>
                      <li>Letter of offer/ employment</li>
                      <li>Local utility/ telecommunication bill</li>
                      <li>Local bank statement/ credit card statement</li>
                      <li>In-Principle Approval (IPA) issued by Ministry of Manpower</li>
                      <li>In-Principle Approval (IPA) issued from ICA</li>
                      <li>Work permit of foreign domestic worker issue by Ministry of Manpower</li>
                  </p>
                </div>
              </div>
            </div>
          </div>
          <div class="main-content">
            <%= image_tag("visa-card.jpg", alt: "Visa Card", id: "main-image-2f", style: "width: 80%;" ) %>
          </div>
        </div>
      </div>

      <!-- Self Employed - Singaporean -->
      <div id="label3" class="tab-content" style="display: none;">
        <div class="content" id="singapore-content">
          <div class="sidebar">
            <div class="accordion">
              <div class="accordion-item">
                <button class="accordion-header" data-image="<%= image_path('Nric.png') %>" onclick="toggleAccordion(event,false)">Identification Document</button>
                  <div class="accordion-content">
                      <p>NRIC (front & back) for Singaporean/Permanent Residents</p>
                  </div>
              </div>
              <div class="accordion-item">
                <button class="accordion-header" data-image="<%= image_path('tax-assesment.png') %>" onclick="toggleAccordion(event,false)">Income Tax Notice of Assessment</button>
                  <div class="accordion-content">
                    <p>Latest 2 years of Income Tax Notice of Assessment in SGD is preferred; else minimally latest 1 year of Income Tax Notice of Assessment</p>
                  </div>
              </div>
            </div>
          </div>
          <div class="main-content">
              <%= image_tag("visa-card.jpg", alt: "Visa Card", id: "main-image", style:"width: 80%") %>
          </div>
        </div>

        <!-- Foreigner -->
        <div class="content" id="foreigners-content" style="display: none;">
            <div class="sidebar">
              <div class="accordion">
                <div class="accordion-item">
                  <button class="accordion-header" data-image="<%= image_path('passport.jpeg') %>" onclick="toggleAccordion(event,false)">Valid Passport</button>
                  <div class="accordion-content">
                    <p>Passport for Foreigner (minimum validity of 6 months at the time of application)</p>
                  </div>
                </div>
                <div class="accordion-item">
                  <button class="accordion-header" data-image='["<%= image_path('employment-pass.jpg') %>","<%= image_path('spass.jpg') %>","<%= image_path('personalised-employment.jpg') %>","<%= image_path('long-term.jpg') %>","<%= image_path('overseas-network.jpg') %>"]' onclick="toggleAccordion(event,true)">Employment Pass</button>
                  <div class="accordion-content">
                    <p>Employment Pass must have a minimum validity of 6 months at the time of application. Any of these following pass is acceptable:
                      <ul>
                        <li>Employment Pass</li> 
                        <li>S Pass</li> 
                        <li>Personalised Employment Pass</li>
                        <li>Long-Term Visit Pass with LOC</li>
                        <li>Tech. Pass</li>
                        <li>International Organisation Pass</li>
                        <li>Overseas Networks & Expertise Pass</li>
                      </ul>
                    </p>
                  </div>
                </div>
                <div class="accordion-item">
                  <button class="accordion-header" data-image="<%= image_path('tax-assesment.png') %>" onclick="toggleAccordion(event,false)"> Latest Income Tax Notice of Assessment </button>
                  <div class="accordion-content">
                    <p>Latest 2 years of Income Tax Notice of Assessment in SGD is preferred; else minimally latest 1 year of Income Tax Notice of Assessment</p>
                  </div>
                </div>
                <div class="accordion-item">
                  <button class="accordion-header" data-image='["<%= image_path('employment-certificate.jpg') %>","<%= image_path('utility-bill.webp') %>","<%= image_path('account.webp') %>","<%= image_path('ipa.webp') %>","<%= image_path('dom-worker-work-permit.jpg') %>"]' onclick="toggleAccordion(event,true)">Proof of Residential Address</button>
                  <div class="accordion-content">
                    <p>Latest copy of your Residential Address proof dated within 3 months before the date of card application (For new DBS/POSB Bank customers only). Submission of either one of the documents is accpetable:
                      <ul>
                        <li>Letter of offer/ employment</li>
                        <li>Local utility/ telecommunication bill</li>
                        <li>Local bank statement/ credit card statement</li>
                        <li>In-Principle Approval (IPA) issued by Ministry of Manpower</li>
                        <li>In-Principle Approval (IPA) issued from ICA</li>
                        <li>Work permit of foreign domestic worker issue by Ministry of Manpower</li>
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <div class="main-content">
                <%= image_tag("visa-card.jpg", alt: "Visa Card", id: "main-image", style:"width: 80%") %>
            </div>
        </div>
      </div>
    </div>
  </div>

  <div class="popup-overlay" id="supplementary_popup">
    <div class="popup-content">
      <span class="close" onclick="closePopup('supplementary_popup')">&times;</span>
      <h1>Supplementary Credit Cards</h1>
        <h2 id="popup-header">Eligibility</h2>
        <ul>Supplementary Card Applicant must be at least 18 years old. No income is required.</ul>
        <h2 id="popup-header">How to apply</h2>
        <ul>Complete and mail back the <a id="form-link" href="https://www.dbs.com.sg/iforms/credit-card/supplementary-details.page?pid=sg-dbs-pweb-supplementary-credit-cards-txtlink-application-form">application form</a> with your Supplementary Card Applicant's documents below:</ul>
          <ul>
              <li id="sec-li">Singaporean/Permanent Residents: NRIC (front and back)</li>
              <li id="sec-li">Foreigners: Passport with at least 6 months validity at the time of application. If you are new to DBS/POSB Bank, please also provide the latest copy of your Residential Address Proof.</li>
          </ul>
    </div>
  </div>

  <div class="popup-overlay" id="livefresh_popup">
    <div class="popup-content">
      <span class="close" onclick="closePopup('livefresh_popup')">&times;</span>
      <h1>DBS Live Fresh Student Card</h1>
        <li>To qualify, you must be between 21 to 27 years old. No minimum income required.
        <li>Applicable for existing students (Singaporean/Permanent Residents) from eligible local tertiary institution.</li>
        <br>
        <ul>You will need to provide the following documents:</ul>
          <ul>
            <li id="sec-li">NRIC (front and back)</li>
            <li id="sec-li">Student Matriculation Card (front and back, digital copy is acceptable)</li>
          </ul>
        </li>
    </div>
  </div>

  <script>
    // Pop Up close and open
    function showPopup(popupId) {
        document.getElementById(popupId).classList.add("show");
    }

    function closePopup(popupId) {
        document.getElementById(popupId).classList.remove("show");
    }

    document.addEventListener('DOMContentLoaded', () => {
        // Add event listeners for section clicks
        document.getElementById('section1').addEventListener('click', () => showPopup('principal_popup'));
        document.getElementById('section2').addEventListener('click', () => showPopup('supplementary_popup'));
        document.getElementById('section3').addEventListener('click', () => showPopup('livefresh_popup'));

        const accordionHeaders = document.querySelectorAll('.accordion-header');
        const toggleCheckbox = document.getElementById('toggle');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        let slideIndex = 0;

        // Initialize the first active header image
        const initialActiveHeader = document.querySelector('.accordion-header.active');
        if (initialActiveHeader) {
            updateMainImage(initialActiveHeader.getAttribute('data-image'), initialActiveHeader.closest('.content').querySelector('.main-content'));
        }

        accordionHeaders.forEach(header => {
            header.addEventListener('click', () => {
                resetAccordionHeaders(header.closest('.content'));
                toggleAccordion(header);
            });
        });

        toggleCheckbox.addEventListener('change', () => {
            tabContents.forEach(tab => toggleContent(tab));
            updateMainImageForActiveTab();
        });

        tabs.forEach(tab => {
            tab.addEventListener('click', (event) => {
                openTab(event, tab.getAttribute('onclick').match(/'(.*?)'/)[1]);
            });
        });

        // Open the first tab by default
        const defaultTab = document.querySelector('.tab.active');
        if (defaultTab) {
            defaultTab.click();
        }

        function resetAccordionHeaders(contentContainer) {
            const allContents = contentContainer.querySelectorAll('.accordion-content');
            const allHeaders = contentContainer.querySelectorAll('.accordion-header');
            allContents.forEach(content => content.style.display = 'none');
            allHeaders.forEach(header => header.classList.remove('active'));
        }

        function toggleAccordion(header) {
            const currentContent = header.nextElementSibling;
            currentContent.style.display = 'block';
            header.classList.add('active');
            updateMainImage(header.getAttribute('data-image'), header.closest('.content').querySelector('.main-content'));
        }

        function updateMainImage(imageData, mainContent) {
            const isSlideshow = imageData.startsWith('[');
            let images = [];
            if (isSlideshow) {
                images = JSON.parse(imageData);
            } else {
                images.push(imageData);
            }

            // Clear previous main content
            while (mainContent.firstChild) {
                mainContent.removeChild(mainContent.firstChild);
            }

            if (isSlideshow && images.length > 1) {
                // Add slideshow buttons and images
                const prevButton = document.createElement('button');
                prevButton.className = 'prev';
                prevButton.innerHTML = '&#10094;';
                prevButton.onclick = () => changeSlide(-1);
                
                const nextButton = document.createElement('button');
                nextButton.className = 'next';
                nextButton.innerHTML = '&#10095;';
                nextButton.onclick = () => changeSlide(1);

                const slideshowContainer = document.createElement('div');
                slideshowContainer.className = 'slideshow-container';

                images.forEach((imgSrc, index) => {
                    const imgElement = document.createElement('img');
                    imgElement.className = 'slide';
                    imgElement.src = imgSrc;
                    if (index === 0) {
                        imgElement.style.display = 'block'; // Show the first image
                    } else {
                        imgElement.style.display = 'none'; // Hide the other images
                    }
                    slideshowContainer.appendChild(imgElement);
                });

                mainContent.appendChild(prevButton);
                mainContent.appendChild(slideshowContainer);
                mainContent.appendChild(nextButton);

                // Initialize slideIndex
                slideIndex = 0;
            } else {
                // Add single image
                const imgElement = document.createElement('img');
                imgElement.src = images[0];
                imgElement.className = 'main-image';
                mainContent.appendChild(imgElement);
            }
        }

        function showSlides(n, slides) {
            if (n >= slides.length) { slideIndex = 0 }
            if (n < 0) { slideIndex = slides.length - 1 }
            slides.forEach(slide => slide.style.display = 'none');
            slides[slideIndex].style.display = 'block';
        }

        window.changeSlide = function(n) {
            const slides = document.querySelectorAll('.slide');
            showSlides(slideIndex += n, slides);
        }

        function toggleContent(tab) {
            const singaporeContent = tab.querySelector('#singapore-content');
            const foreignersContent = tab.querySelector('#foreigners-content');
            if (toggleCheckbox.checked) {
                singaporeContent.style.display = 'none';
                foreignersContent.style.display = 'flex';
                resetAccordion(foreignersContent);
            } else {
                singaporeContent.style.display = 'flex';
                foreignersContent.style.display = 'none';
                resetAccordion(singaporeContent);
            }
            updateMainImageForActiveTab();
        }

        function resetAccordion(contentContainer) {
            const headers = contentContainer.querySelectorAll('.accordion-header');
            const contents = contentContainer.querySelectorAll('.accordion-content');
            contents.forEach(content => content.style.display = 'none');
            headers.forEach(header => header.classList.remove('active'));
            if (headers.length > 0) {
                headers[0].classList.add('active');
                contents[0].style.display = 'block';
                updateMainImage(headers[0].getAttribute('data-image'), contentContainer.querySelector('.main-content'));
            }
        }

        function openTab(evt, tabName) {
            tabs.forEach(tab => tab.classList.remove('active'));
            evt.currentTarget.classList.add('active');
            tabContents.forEach(content => content.style.display = 'none');
            const activeTab = document.getElementById(tabName);
            activeTab.style.display = 'block';
            toggleContent(activeTab);

            // Update the image for the first accordion header in the active tab
            const activeContent = activeTab.querySelector('.content');
            const firstActiveHeader = activeContent.querySelector('.accordion-header.active');
            if (firstActiveHeader) {
                updateMainImage(firstActiveHeader.getAttribute('data-image'), activeContent.querySelector('.main-content'));
            } else {
                const firstHeader = activeContent.querySelector('.accordion-header');
                if (firstHeader) {
                    updateMainImage(firstHeader.getAttribute('data-image'), activeContent.querySelector('.main-content'));
                }
            }
        }

        function updateMainImageForActiveTab() {
            const activeTabContent = document.querySelector('.tab-content[style*="display: block"] .content');
            const activeHeader = activeTabContent.querySelector('.accordion-header.active');
            if (activeHeader) {
                updateMainImage(activeHeader.getAttribute('data-image'), activeTabContent.querySelector('.main-content'));
            } else {
                const firstHeader = activeTabContent.querySelector('.accordion-header');
                if (firstHeader) {
                    updateMainImage(firstHeader.getAttribute('data-image'), activeTabContent.querySelector('.main-content'));
                }
            }
        }
    });
</script>


</body>
