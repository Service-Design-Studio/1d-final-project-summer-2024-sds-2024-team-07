<div class="custom-container">
  <div class="left-div">
      <%= render 'shared/left_toggle-sidebar' %>
  </div>
  <div class="right-div">
    <%= render 'shared/right_header' %>
    <div class="btn-group">
        <button type="button" onclick="showTabGroup(1)" id=button1 class="btn btn-outline-danger">Salaried Employer A:<br> More than 3 Months </button>
        <button type="button" onclick="showTabGroup(2)" id=button2 class="btn btn-outline-danger">Salaried Employer B:<br> Less than 3 months</button>
        <button type="button" onclick="showTabGroup(3)" id=button3 class="btn btn-outline-danger">Self-Employed/Commision-Based</button>

    </div>

    <div class="tabs">
      <input type="radio" id="tab1" name="tab-control" checked>
      <input type="radio" id="tab2" name="tab-control">
      <input type="radio" id="tab3" name="tab-control">
      <input type="radio" id="tab4" name="tab-control">
      <input type="radio" id="tab5" name="tab-control">
      <ul>
        <li title="Valid Passport">
          <label id="l1" for="tab1" role="button">
            <div class="icon">📕</div>
            <br><span>Valid Passport</span>
          </label>
        </li>
        <li title="Valid Employment Pass">
          <label id="l2" for="tab2" role="button">
            <div class="icon">📝</div>
            <br><span>Valid Employment Pass</span>
          </label>
        </li>
        <li id="it" title="Income Tax">
          <label id="l3" for="tab3" role="button">
            <div class="icon">💵</div>
            <br><span>Income Tax</span>
          </label>
        </li>
        <li title="PaySlip">
          <label id="l4" for="tab4" role="button">
            <div class="icon">💼</div>
            <br><span>Pay Slip</span>
          </label>
        </li>
        <li title="Proof of Singapore Address">
          <label id="l5" for="tab5" role="button">
            <div class="icon">🏠</div>
            <br><span>Proof of Singapore Address</span>
          </label>
        </li>
      </ul>
      <div class="indicator"></div>
    </div>


    <div style="text-align: center; margin-top: 20px;">
    <%= link_to 'Next', pages_applicationform_path, style: 'display: inline-block; padding: 10px 20px; font-size: 16px; text-decoration: none; background-color: red; color: white; border-radius: 5px;' %>
    </div>
  </div>
</div>



<script>
document.addEventListener("DOMContentLoaded", function () {
  const tabsContainer = document.querySelector(".tabs");
  const tabs = tabsContainer.querySelectorAll("input[type='radio']");
  const labels = tabsContainer.querySelectorAll("label");
  const indicator = tabsContainer.querySelector(".indicator");

  function updateIndicator() {
    const activeTab = Array.from(tabs).find(tab => tab.checked);
    if (activeTab) {
      const label = tabsContainer.querySelector(`label[for="${activeTab.id}"]`);
      const labelRect = label.getBoundingClientRect();
      const containerRect = tabsContainer.getBoundingClientRect();
      
      indicator.style.width = `${labelRect.width}px`;
      indicator.style.transform = `translateX(${labelRect.left - containerRect.left}px)`;
    }
  }

  tabs.forEach(tab => {
    tab.addEventListener("change", updateIndicator);
  });

  function resetTabs() {
    labels.forEach(label => {
      label.parentElement.style.display = 'none';
      label.control.disabled = true;
    });
  }

  function restoreTabs(tabIds) {
    tabIds.forEach(id => {
      const tab = document.getElementById(id);
      const label = document.querySelector(`label[for='${id}']`);
      tab.disabled = false;
      label.parentElement.style.display = 'block';
    });
  }

  function showTabGroup(groupNumber) {
    resetTabs();
    var buttons = document.querySelectorAll('.btn-group .btn');
    buttons.forEach(function(button) {
      button.classList.remove('active');
    });

    // Add the 'active' class to the clicked button
    var clickedButton = document.getElementById('button' + groupNumber);
    clickedButton.classList.add('active');

    if (groupNumber === 1) {
      restoreTabs(['tab1', 'tab2', 'tab3', 'tab4', 'tab5']);
    } else if (groupNumber === 2) {
      restoreTabs(['tab1', 'tab2', 'tab4', 'tab5']);
    } else if (groupNumber === 3) {
      restoreTabs(['tab1', 'tab2', 'tab3', 'tab5']);
    }

    updateIndicator();
  }

  document.getElementById('button1').addEventListener('click', () => showTabGroup(1));
  document.getElementById('button2').addEventListener('click', () => showTabGroup(2));
  document.getElementById('button3').addEventListener('click', () => showTabGroup(3));

  // Initialize tab group 1 by default
  showTabGroup(1);

  // Update the indicator on load
  updateIndicator();
});

</script>